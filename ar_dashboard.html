<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foundational Builders Corp - A/R Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Corporate Blue & Orange -->
    <!-- Application Structure Plan: A dashboard layout was chosen to provide an immediate, high-level overview suitable for executive review. The structure includes: 1) A header with branding. 2) A row of Key Performance Indicator (KPI) cards for at-a-glance metrics (Total A/R, Project Count, Largest Project). This immediately answers the most critical questions. 3) A main content area split into a visual chart and a detailed table. This dual-view caters to both visual analysis (quick comparison of project sizes) and detailed data lookup (specific values). The user can instantly see the project distribution on the chart and then use the sortable table to drill down into specifics. This flow from summary to detail is intuitive and efficient for financial data exploration. -->
    <!-- Visualization & Content Choices: 1. Total A/R, Project Count, Largest Project -> Goal: Inform -> Presentation: KPI "Stat" Cards -> Interaction: None -> Justification: These are the most critical summary figures that need to be highly visible and immediately consumable. -> Method: Styled HTML/Tailwind. 2. Project Value Breakdown -> Goal: Compare -> Presentation: Vertical Bar Chart -> Interaction: Hover tooltips show precise values for each project -> Justification: A bar chart provides the clearest visual comparison of the relative financial weight of each distinct project, which is superior to a pie chart for this number of items. -> Library: Chart.js (Canvas). 3. Detailed Project List -> Goal: Organize/Inform -> Presentation: Sortable Table -> Interaction: Users can click headers to sort projects by name (A-Z) or by remaining contract value (High-Low/Low-High) -> Justification: A table provides access to the raw data, and making it sortable adds a crucial layer of interactivity, allowing users to analyze and rank the data according to their needs. -> Method: HTML/Tailwind with Vanilla JS for sorting logic. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 96;
            max-height: 500px;
        }
        .kpi-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .sortable:hover {
            cursor: pointer;
            background-color: #f1f5f9;
        }
        .sortable .arrow {
            opacity: 0.5;
            display: inline-block;
            margin-left: 0.5rem;
        }
        .sortable.asc .arrow.up, .sortable.desc .arrow.down {
            opacity: 1;
            color: #0ea5e9;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8">

        <header class="flex flex-col sm:flex-row justify-between items-center pb-8 border-b border-gray-200">
            <div class="flex items-center space-x-4">
                <!-- Insert your company logo image here. Replace 'your-logo.png' with your file path. -->
                <img src="your-logo.png" alt="Foundational Builders Corporation Logo" class="h-16 w-auto">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-900">Foundational Builders Corp</h1>
                    <p class="text-md text-gray-500">Accounts Receivable Dashboard</p>
                </div>
            </div>
            <div class="text-right mt-4 sm:mt-0">
                <p class="font-semibold text-gray-700">Report Date</p>
                <p class="text-gray-500" id="report-date">September 3, 2025</p>
            </div>
        </header>

        <main class="mt-8">
            <section id="kpi-section">
                <h2 class="text-xl font-bold mb-4">Financial Overview</h2>
                <p class="text-gray-600 mb-6 max-w-3xl">
                    This section provides a high-level summary of the current accounts receivable. These key performance indicators (KPIs) highlight the total value of outstanding contracts, the number of active projects, and the contract with the largest remaining value.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="kpi-card">
                        <h3 class="text-gray-500 font-medium">Total Remaining Contract</h3>
                        <p class="text-3xl lg:text-4xl font-bold text-sky-600 mt-2" id="total-ar"></p>
                    </div>
                    <div class="kpi-card">
                        <h3 class="text-gray-500 font-medium">Active Projects</h3>
                        <p class="text-3xl lg:text-4xl font-bold text-sky-600 mt-2" id="project-count"></p>
                    </div>
                    <div class="kpi-card">
                        <h3 class="text-gray-500 font-medium">Largest Project</h3>
                        <p class="text-3xl lg:text-4xl font-bold text-sky-600 mt-2" id="largest-project-value"></p>
                        <p class="text-sm text-gray-500" id="largest-project-name"></p>
                    </div>
                </div>
            </section>

            <section id="details-section" class="mt-12">
                 <h2 class="text-xl font-bold mb-4">Project Details</h2>
                 <p class="text-gray-600 mb-6 max-w-3xl">
                    Explore the breakdown of accounts receivable by individual project. The bar chart offers a visual comparison of contract values, while the table provides detailed data. You can click the table headers to sort the projects by name or remaining value.
                </p>
                <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                    <div class="lg:col-span-3 bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Remaining Contract by Project</h3>
                        <div class="chart-container h-96 md:h-[450px]">
                            <canvas id="arChart"></canvas>
                        </div>
                    </div>
                    <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-4">Project Data</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr class="border-b">
                                        <th class="p-3 sortable" data-sort="name">
                                            Project
                                            <span class="arrow-container"><span class="arrow up">▲</span><span class="arrow down">▼</span></span>
                                        </th>
                                        <th class="p-3 text-right sortable" data-sort="value">
                                            Amount
                                            <span class="arrow-container"><span class="arrow up">▲</span><span class="arrow down">▼</span></span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="project-table-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="text-center mt-12 pt-8 border-t border-gray-200 text-gray-500 text-sm">
            <p class="font-semibold">Foundational Builders Corporation</p>
            <p>1010 S Robertson Blvd Suite E, Los Angeles, CA 90035</p>
            <p>License #1068191 | (310) 499-8716</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const projectData = [
                { name: 'Ramsgate Project', job: 'Ramsgate', value: 4250000.00 },
                { name: 'Manhattan Project', job: 'Manhattan', value: 7350000.00 },
                { name: 'Sherman Way Project', job: 'Sherman Way', value: 53000.00 },
                { name: 'Knowlton Project', job: 'Knowlton', value: 5500000.00 },
                { name: 'Broward County', job: 'Florida', value: 5800000.00 }
            ];

            let sortState = {
                key: 'value',
                direction: 'desc'
            };

            const formatCurrency = (value) => {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(value);
            };
            
            const formatCurrencyShort = (value) => {
                 if (value >= 1e6) {
                    return '$' + (value / 1e6).toFixed(2) + 'M';
                }
                 if (value >= 1e3) {
                    return '$' + (value / 1e3).toFixed(0) + 'K';
                }
                return formatCurrency(value);
            };

            const updateTotalAR = () => {
                const total = projectData.reduce((sum, p) => sum + p.value, 0);
                document.getElementById('total-ar').textContent = formatCurrency(total);
            };

            const updateProjectCount = () => {
                document.getElementById('project-count').textContent = projectData.length;
            };

            const updateLargestProject = () => {
                if (projectData.length === 0) return;
                const largest = projectData.reduce((max, p) => p.value > max.value ? p : max, projectData[0]);
                document.getElementById('largest-project-value').textContent = formatCurrencyShort(largest.value);
                document.getElementById('largest-project-name').textContent = largest.name;
            };

            const renderTable = () => {
                const tableBody = document.getElementById('project-table-body');
                tableBody.innerHTML = '';
                
                const sortedData = [...projectData].sort((a, b) => {
                    if (sortState.key === 'name') {
                        return sortState.direction === 'asc' ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name);
                    } else {
                        return sortState.direction === 'asc' ? a.value - b.value : b.value - a.value;
                    }
                });

                sortedData.forEach(p => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-100 hover:bg-gray-50';
                    row.innerHTML = `
                        <td class="p-3">${p.name}</td>
                        <td class="p-3 text-right font-mono">${formatCurrency(p.value)}</td>
                    `;
                    tableBody.appendChild(row);
                });
            };

            const updateSortHeaders = () => {
                document.querySelectorAll('.sortable').forEach(header => {
                    header.classList.remove('asc', 'desc');
                    if (header.dataset.sort === sortState.key) {
                        header.classList.add(sortState.direction);
                    }
                });
            };

            document.querySelectorAll('.sortable').forEach(header => {
                header.addEventListener('click', () => {
                    const sortKey = header.dataset.sort;
                    if (sortState.key === sortKey) {
                        sortState.direction = sortState.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        sortState.key = sortKey;
                        sortState.direction = sortKey === 'value' ? 'desc' : 'asc';
                    }
                    updateSortHeaders();
                    renderTable();
                });
            });
            
            const renderChart = () => {
                const ctx = document.getElementById('arChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: projectData.map(p => p.name),
                        datasets: [{
                            label: 'Remaining Contract Value',
                            data: projectData.map(p => p.value),
                            backgroundColor: [
                                'rgba(14, 165, 233, 0.7)',
                                'rgba(249, 115, 22, 0.7)',
                                'rgba(16, 185, 129, 0.7)',
                                'rgba(139, 92, 246, 0.7)',
                                'rgba(239, 68, 68, 0.7)'
                            ],
                            borderColor: [
                                'rgba(14, 165, 233, 1)',
                                'rgba(249, 115, 22, 1)',
                                'rgba(16, 185, 129, 1)',
                                'rgba(139, 92, 246, 1)',
                                'rgba(239, 68, 68, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += formatCurrency(context.parsed.y);
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value, index, values) {
                                        return formatCurrencyShort(value);
                                    }
                                }
                            },
                            x: {
                                ticks: {
                                    autoSkip: false,
                                    maxRotation: 45,
                                    minRotation: 0
                                }
                            }
                        }
                    }
                });
            };

            updateTotalAR();
            updateProjectCount();
            updateLargestProject();
            updateSortHeaders();
            renderTable();
            renderChart();
        });
    </script>
</body>
</html>
